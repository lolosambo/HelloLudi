/* 
 * CSS COMPLÉMENTAIRE pour la correction de l'alignement des images
 * À ajouter à rich-editor.css ou inclure séparément
 */

/* === STYLES RENFORCÉS POUR PERSISTANCE === */

/* Base pour toutes les images de l'éditeur */
.editor-content img.editor-image {
    transition: none !important; /* Éviter les animations qui peuvent casser l'alignement */
    border-radius: 4px;
    cursor: pointer;
}

/* === ALIGNEMENTS STANDARD === */

/* Images alignées à gauche - styles renforcés */
.editor-content img.align-left {
    float: left !important;
    margin: 5px 15px 15px 5px !important;
    clear: left !important;
    max-width: 50% !important;
    height: auto !important;
    display: block !important;
    position: static !important;
}

/* Images alignées à droite - styles renforcés */
.editor-content img.align-right {
    float: right !important;
    margin: 5px 5px 15px 15px !important;
    clear: right !important;
    max-width: 50% !important;
    height: auto !important;
    display: block !important;
    position: static !important;
}

/* Images centrées - styles renforcés */
.editor-content img.align-center {
    display: block !important;
    margin: 15px auto !important;
    float: none !important;
    max-width: 100% !important;
    height: auto !important;
    position: static !important;
}

/* === HABILLAGES AVANCÉS === */

/* Habillage gauche - texte à droite */
.editor-content img.wrap-left {
    float: left !important;
    margin: 5px 15px 10px 5px !important;
    clear: left !important;
    max-width: 50% !important;
    height: auto !important;
    display: block !important;
    position: static !important;
}

/* Habillage droite - texte à gauche */
.editor-content img.wrap-right {
    float: right !important;
    margin: 5px 5px 10px 15px !important;
    clear: right !important;
    max-width: 50% !important;
    height: auto !important;
    display: block !important;
    position: static !important;
}

/* Habillage des deux côtés */
.editor-content img.wrap-both {
    float: left !important;
    margin: 5px 15px 10px 5px !important;
    clear: none !important;
    max-width: 40% !important;
    height: auto !important;
    display: block !important;
    position: static !important;
}

/* === STYLES POUR L'AFFICHAGE FINAL (après validation) === */

/* Contexte de post/article - garantir la persistance */
.post-content img.align-left,
.post-content img.wrap-left,
.article-content img.align-left,
.article-content img.wrap-left {
    float: left !important;
    margin: 5px 15px 15px 5px !important;
    clear: left !important;
    max-width: 50% !important;
    height: auto !important;
    display: block !important;
}

.post-content img.align-right,
.post-content img.wrap-right,
.article-content img.align-right,
.article-content img.wrap-right {
    float: right !important;
    margin: 5px 5px 15px 15px !important;
    clear: right !important;
    max-width: 50% !important;
    height: auto !important;
    display: block !important;
}

.post-content img.align-center,
.article-content img.align-center {
    display: block !important;
    margin: 15px auto !important;
    float: none !important;
    max-width: 100% !important;
    height: auto !important;
}

.post-content img.wrap-both,
.article-content img.wrap-both {
    float: left !important;
    margin: 5px 15px 10px 5px !important;
    clear: none !important;
    max-width: 40% !important;
    height: auto !important;
    display: block !important;
}

/* === CLEARFIX ET STABILISATION === */

/* Clearfix pour éviter les débordements */
.editor-content::after,
.post-content::after,
.article-content::after {
    content: "";
    display: table;
    clear: both;
}

/* Empêcher les images de casser la mise en page */
.editor-content,
.post-content,
.article-content {
    overflow-wrap: break-word;
    word-wrap: break-word;
}

/* === RESPONSIVE === */

/* Sur mobile, forcer l'alignement centré pour éviter les problèmes */
@media (max-width: 768px) {
    .editor-content img.align-left,
    .editor-content img.align-right,
    .editor-content img.wrap-left,
    .editor-content img.wrap-right,
    .editor-content img.wrap-both,
    .post-content img.align-left,
    .post-content img.align-right,
    .post-content img.wrap-left,
    .post-content img.wrap-right,
    .post-content img.wrap-both,
    .article-content img.align-left,
    .article-content img.align-right,
    .article-content img.wrap-left,
    .article-content img.wrap-right,
    .article-content img.wrap-both {
        float: none !important;
        display: block !important;
        margin: 15px auto !important;
        max-width: 100% !important;
        clear: both !important;
    }
}

/* === STYLES POUR LE DEBUG === */

/* Indicateur visuel pour les images avec problème d'alignement */
.debug-alignment img.editor-image {
    outline: 2px dashed #ff6b6b;
    outline-offset: 2px;
}

.debug-alignment img.align-left::before,
.debug-alignment img.wrap-left::before {
    content: "← GAUCHE";
    position: absolute;
    background: #007bff;
    color: white;
    padding: 2px 6px;
    font-size: 10px;
    top: -20px;
    left: 0;
    border-radius: 3px;
}

.debug-alignment img.align-right::before,
.debug-alignment img.wrap-right::before {
    content: "DROITE →";
    position: absolute;
    background: #28a745;
    color: white;
    padding: 2px 6px;
    font-size: 10px;
    top: -20px;
    right: 0;
    border-radius: 3px;
}

.debug-alignment img.align-center::before {
    content: "↔ CENTRE";
    position: absolute;
    background: #ffc107;
    color: black;
    padding: 2px 6px;
    font-size: 10px;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    border-radius: 3px;
}

/* === STYLES POUR LES POIGNÉES DE REDIMENSIONNEMENT === */

/* Wrapper stabilisé */
.editor-content .image-wrapper {
    position: relative;
    display: inline-block;
    line-height: 0;
    /* Empêcher le déplacement */
    transform: translateZ(0);
}

/* Wrapper avec alignement à gauche */
.editor-content .image-wrapper.align-left,
.editor-content .image-wrapper.wrap-left {
    float: left !important;
    margin: 5px 15px 15px 5px !important;
    clear: left !important;
    max-width: 50% !important;
}

/* Wrapper avec alignement à droite */
.editor-content .image-wrapper.align-right,
.editor-content .image-wrapper.wrap-right {
    float: right !important;
    margin: 5px 5px 15px 15px !important;
    clear: right !important;
    max-width: 50% !important;
}

/* Wrapper centré */
.editor-content .image-wrapper.align-center {
    display: block !important;
    margin: 15px auto !important;
    float: none !important;
    text-align: center;
}

/* Poignée de redimensionnement stabilisée */
.resize-handle {
    position: absolute !important;
    bottom: -8px !important;
    right: -8px !important;
    width: 16px !important;
    height: 16px !important;
    background: #007bff !important;
    color: white !important;
    border: 2px solid white !important;
    border-radius: 50% !important;
    cursor: se-resize !important;
    font-size: 10px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    z-index: 1001 !important;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3) !important;
    user-select: none !important;
    pointer-events: auto !important;
}

.resize-handle:hover {
    background: #0056b3 !important;
    transform: scale(1.1) !important;
    box-shadow: 0 3px 8px rgba(0,0,0,0.4) !important;
}

/* === UTILITAIRES === */

/* Classe pour forcer l'affichage du debug */
.show-image-debug .editor-content {
    position: relative;
}

.show-image-debug .editor-content::before {
    content: "MODE DEBUG ALIGNEMENT ACTIVÉ";
    position: absolute;
    top: -30px;
    left: 0;
    background: #dc3545;
    color: white;
    padding: 5px 10px;
    font-size: 12px;
    border-radius: 3px;
    z-index: 1000;
}

/* Classe pour désactiver temporairement les transitions */
.no-transitions * {
    transition: none !important;
    animation: none !important;
}